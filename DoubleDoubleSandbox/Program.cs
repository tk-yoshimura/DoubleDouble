using DoubleDouble;
using System;
using System.IO;

namespace DoubleDoubleSandbox {
    public static class Program {
        static void Main() {
            ddouble v = 1d/4096;

            ddouble x = LogMk2(v);

            ddouble y = ddouble.Log2(1d + v) - x;

            Console.WriteLine("END");
            Console.Read();
        }

        public static ddouble LogMk2(ddouble x) {
            ddouble y =
                x * (23d * (2d + x)
                    * ("354941003085308640"
                + x * ("3549410030853086400"
                + x * ("16412582041890434400"
                + x * ("46555052497700947200"
                + x * ("90619246611214769448"
                + x * ("128289892261382115264"
                + x * ("136603235643434610336"
                + x * ("111598153149703252032"
                + x * ("70726232978806188784"
                + x * ("34933000561634535360"
                + x * ("13437846772554134112"
                + x * ("4003559017830759296"
                + x * ("914066313765961902"
                + x * ("157328255322849624"
                + x * ("19937281228280052"
                + x * ("1798817569254888"
                + x * ("110109050232090"
                + x * ("4254540825080"
                + x * ("92421446460"
                + x * ("913741080"
                + x * ("2490417"
                ))))))))))))))))))))))
            / (7759752d
                    * ("2104098963720"
                + x * ("23145088600920"
                + x * ("118685861314020"
                + x * ("376780512108000"
                + x * ("829376615067000"
                + x * ("1343590116408540"
                + x * ("1659391212145590"
                + x * ("1597008083869440"
                + x * ("1213941955644000"
                + x * ("734359948476000"
                + x * ("354590946549840"
                + x * ("136526995463040"
                + x * ("41716581947040"
                + x * ("10028024506500"
                + x * ("1871589827250"
                + x * ("266181664320"
                + x * ("28109701620"
                + x * ("2125943820"
                + x * ("109359250"
                + x * ("3542000"
                + x * ("63756"
                + x * ("506"
                + x
                )))))))))))))))))))))));

            y *= ddouble.LbE;

            return y;
        }
    }
}
